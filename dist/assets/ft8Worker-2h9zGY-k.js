(function(){"use strict";var se=(function(){var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return(function(e){e=e||{};var e=typeof e<"u"?e:{},s,w;e.ready=new Promise(function(n,t){s=n,w=t});var y={},f;for(f in e)e.hasOwnProperty(f)&&(y[f]=e[f]);var k=function(n,t){throw t},K=typeof window=="object",D=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var d="";function me(n){return e.locateFile?e.locateFile(n,d):d+n}var q;(K||D)&&(D?d=self.location.href:typeof document<"u"&&document.currentScript&&(d=document.currentScript.src),i&&(d=i),d.indexOf("blob:")!==0?d=d.substr(0,d.replace(/[?#].*/,"").lastIndexOf("/")+1):d="",D&&(q=function(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var pe=e.print||console.log.bind(console),A=e.printErr||console.warn.bind(console);for(f in y)y.hasOwnProperty(f)&&(e[f]=y[f]);y=null,e.arguments&&e.arguments,e.thisProgram&&e.thisProgram,e.quit&&(k=e.quit);var E;e.wasmBinary&&(E=e.wasmBinary),e.noExitRuntime,typeof WebAssembly!="object"&&W("no native wasm support detected");var X,$=!1,J=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Q(n,t,o){for(var R=t+o,u=t;n[u]&&!(u>=R);)++u;if(u-t>16&&n.subarray&&J)return J.decode(n.subarray(t,u));for(var m="";t<u;){var r=n[t++];if(!(r&128)){m+=String.fromCharCode(r);continue}var a=n[t++]&63;if((r&224)==192){m+=String.fromCharCode((r&31)<<6|a);continue}var p=n[t++]&63;if((r&240)==224?r=(r&15)<<12|a<<6|p:r=(r&7)<<18|a<<12|p<<6|n[t++]&63,r<65536)m+=String.fromCharCode(r);else{var ae=r-65536;m+=String.fromCharCode(55296|ae>>10,56320|ae&1023)}}return m}function ye(n,t){return n?Q(b,n,t):""}var b,I;function ge(n){e.HEAP8=new Int8Array(n),e.HEAP16=new Int16Array(n),e.HEAP32=I=new Int32Array(n),e.HEAPU8=b=new Uint8Array(n),e.HEAPU16=new Uint16Array(n),e.HEAPU32=new Uint32Array(n),e.HEAPF32=new Float32Array(n),e.HEAPF64=new Float64Array(n)}e.INITIAL_MEMORY;var Z,ee=[],ne=[],te=[];function he(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)_e(e.preRun.shift());j(ee)}function ve(){j(ne)}function we(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Ae(e.postRun.shift());j(te)}function _e(n){ee.unshift(n)}function Re(n){ne.unshift(n)}function Ae(n){te.unshift(n)}var _=0,T=null;function Se(n){_++,e.monitorRunDependencies&&e.monitorRunDependencies(_)}function Ee(n){if(_--,e.monitorRunDependencies&&e.monitorRunDependencies(_),_==0&&T){var t=T;T=null,t()}}e.preloadedImages={},e.preloadedAudios={};function W(n){e.onAbort&&e.onAbort(n),n="Aborted("+n+")",A(n),$=!0,n+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(n);throw w(t),t}var be="data:application/octet-stream;base64,";function re(n){return n.startsWith(be)}var c;c="decode_ft8.wasm",re(c)||(c=me(c));function ie(n){try{if(n==c&&E)return new Uint8Array(E);if(q)return q(n);throw"both async and sync fetching of the wasm failed"}catch(t){W(t)}}function Ie(){return!E&&(K||D)&&typeof fetch=="function"?fetch(c,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+c+"'";return n.arrayBuffer()}).catch(function(){return ie(c)}):Promise.resolve().then(function(){return ie(c)})}function Te(){var n={a:We};function t(r,a){var p=r.exports;e.asm=p,X=e.asm.g,ge(X.buffer),Z=e.asm.k,Re(e.asm.h),Ee()}Se();function o(r){t(r.instance)}function R(r){return Ie().then(function(a){return WebAssembly.instantiate(a,n)}).then(function(a){return a}).then(r,function(a){A("failed to asynchronously prepare wasm: "+a),W(a)})}function u(){return!E&&typeof WebAssembly.instantiateStreaming=="function"&&!re(c)&&typeof fetch=="function"?fetch(c,{credentials:"same-origin"}).then(function(r){var a=WebAssembly.instantiateStreaming(r,n);return a.then(o,function(p){return A("wasm streaming compile failed: "+p),A("falling back to ArrayBuffer instantiation"),R(o)})}):R(o)}if(e.instantiateWasm)try{var m=e.instantiateWasm(n,t);return m}catch(r){return A("Module.instantiateWasm callback failed with error: "+r),!1}return u().catch(w),{}}function j(n){for(;n.length>0;){var t=n.shift();if(typeof t=="function"){t(e);continue}var o=t.func;typeof o=="number"?t.arg===void 0?oe(o)():oe(o)(t.arg):o(t.arg===void 0?null:t.arg)}}var B=[];function oe(n){var t=B[n];return t||(n>=B.length&&(B.length=n+1),B[n]=t=Z.get(n)),t}function Pe(n,t,o){b.copyWithin(n,t,t+o)}function Fe(n){W("OOM")}function Me(n){b.length,Fe()}function Oe(n){He(n)}var H={mappings:{},buffers:[null,[],[]],printChar:function(n,t){var o=H.buffers[n];t===0||t===10?((n===1?pe:A)(Q(o,0)),o.length=0):o.push(t)},varargs:void 0,get:function(){H.varargs+=4;var n=I[H.varargs-4>>2];return n},getStr:function(n){var t=ye(n);return t},get64:function(n,t){return n}};function Ue(n){return 0}function Ce(n,t,o,R,u){}function De(n,t,o,R){for(var u=0,m=0;m<o;m++){var r=I[t>>2],a=I[t+4>>2];t+=8;for(var p=0;p<a;p++)H.printChar(n,b[r+p]);u+=a}return I[R>>2]=u,0}var We={c:Pe,a:Me,f:Oe,d:Ue,b:Ce,e:De};Te(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.h).apply(null,arguments)},e._malloc=function(){return(e._malloc=e.asm.i).apply(null,arguments)},e._decode_ft8=function(){return(e._decode_ft8=e.asm.j).apply(null,arguments)};var N;function Be(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}T=function n(){N||z(),N||(T=n)};function z(n){if(_>0||(he(),_>0))return;function t(){N||(N=!0,e.calledRun=!0,!$&&(ve(),s(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),we()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),t()},1)):t()}e.run=z;function He(n,t){Ne(n)}function Ne(n){k(n,new Be(n))}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return z(),e.ready})})(),fe="/assets/decode_ft8-BmAsUujb.wasm";const G=12e3,S=15,P=G*S,ue=120;let F=null,V=48e3,x=0,g=null,h=0,M=!1,L=!1,O=0,v=0,U=1;function C(i){self.postMessage(i)}function Y(i){C({type:"log",text:i})}function ce(){if(L||M)return;L=!0;const i=()=>{if(M)return;try{F?._decode_ft8(0,0,x,1)}catch(f){C({type:"error",message:f?.message??String(f)})}const s=h-P;s>0&&g?(g.set(g.slice(P,h),0),h=Math.min(s,ue)):h=Math.min(h,P);const w=Date.now(),y=S*1e3-w%(S*1e3);setTimeout(i,y)},l=Date.now(),e=S*1e3-l%(S*1e3);setTimeout(i,e)}async function le(i){M=!1,L=!1,h=0,V=i,O=0,v=0,U=V/G,F=await se({print:s=>Y(s),printErr:s=>Y(s),locateFile:s=>s.endsWith(".wasm")?fe:s});const e=P*2;x=F._malloc(e*4),g=new Float32Array(F.HEAPU8.buffer,x,e),g.fill(0),C({type:"ready"}),ce()}function de(i){if(!g||!Number.isFinite(U)||U<=0)return;const l=i.length+1;for(;v+1<l;){const e=Math.floor(v),s=v-e,w=e===0?O:i[e-1],y=e===0?i[0]:i[e],f=w+(y-w)*s;if(h<g.length)g[h++]=f;else break;v+=U}v-=i.length,v<0&&(v=0),O=i.length>0?i[i.length-1]:O}self.onmessage=i=>{const l=i.data;if(l.type==="stop"){M=!0;return}if(l.type==="init"){le(l.inputSampleRate).catch(e=>{C({type:"error",message:e?.message??String(e)})});return}l.type==="pcm"&&de(l.pcm)}})();
